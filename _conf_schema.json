{
    "vector_db_type": {
        "description": "选择向量数据库类型",
        "type": "string",
        "default": "faiss",
        "options": [
            "faiss",
            "milvus_lite",
            "milvus"
        ]
    },
    "default_collection_name": {
        "description": "默认知识库集合名称",
        "type": "string",
        "default": "general",
        "hint": "AstrBot 版本 >= v4.0.0 时，本配置项失效，请直接在 WebUI `配置文件` 页下配置知识库。"
    },
    "milvus_host": {
        "description": "Milvus 服务主机",
        "type": "string",
        "default": "localhost",
        "hint": " (仅当 vector_db_type 为 'milvus' 时有效)",
        "condition": {
            "vector_db_type": "milvus"
        }
    },
    "milvus_port": {
        "description": "Milvus 服务端口",
        "type": "string",
        "default": "19530",
        "hint": "(仅当 vector_db_type 为 'milvus' 时有效)",
        "condition": {
            "vector_db_type": "milvus"
        }
    },
    "milvus_user": {
        "description": "Milvus 用户名",
        "type": "string",
        "default": "",
        "hint": "(可选, 仅当 vector_db_type 为 'milvus' 时有效)",
        "condition": {
            "vector_db_type": "milvus"
        }
    },
    "milvus_password": {
        "description": "Milvus 密码",
        "type": "string",
        "default": "",
        "hint": "(可选, 仅当 vector_db_type 为 'milvus' 时有效)",
        "condition": {
            "vector_db_type": "milvus"
        }
    },
    "faiss_db_subpath": {
        "description": "Faiss 索引存储子路径 ",
        "type": "string",
        "default": "faiss_data",
        "hint": "(相对于持久化数据目录 'AstrBot/data/plugins_data/astrbot_plugin_knowledge_base/', 仅当 vector_db_type 为 'faiss' 时有效)",
        "condition": {
            "vector_db_type": "faiss"
        }
    },
    "milvus_lite_db_subpath": {
        "description": "Milvus Lite 数据文件子路径 ",
        "type": "string",
        "default": "milvus_lite_data/milvus_lite.db",
        "hint": "(相对于持久化数据目录 'AstrBot/data/plugins_data/astrbot_plugin_knowledge_base/', 仅当 vector_db_type 为 'milvus_lite' 时有效)",
        "condition": {
            "vector_db_type": "milvus_lite"
        }
    },
    "text_chunk_size": {
        "description": "文本分块大小 (字符数)",
        "type": "int",
        "default": 300
    },
    "text_chunk_overlap": {
        "description": "文本分块重叠大小 (字符数)",
        "type": "int",
        "default": 100
    },
    "search_top_k": {
        "description": "搜索时默认返回的结果数量",
        "type": "int",
        "default": 3
    },
    "auto_create_collection": {
        "description": "当指定的知识库集合不存在时，是否自动创建",
        "type": "bool",
        "default": true
    },
    "LLM_model": {
        "description": "是否启用LLM大模型解析文件",
        "type": "bool",
        "default": false,
        "hint": "如果启用，则会消耗AstrBot当前使用的提供商Token。（仅支持OpenAI兼容的提供商）"
    },
    "embedding_api_url": {
        "description": "[备用] OpenAI 兼容的 Embedding API 地址 ",
        "type": "string",
        "default": "https://api.openai.com/v1",
        "hint": "当在 WebUI 知识库页面指定了知识库的 AstrBot 嵌入模型提供商时，本配置失效。（此项为 AstrBot 版本 < 3.5.13 用户设计，其他版本用户请忽略）"
    },
    "embedding_api_key": {
        "description": "[备用] Embedding API 密钥",
        "type": "string",
        "default": "sk-your-key",
        "hint": "当在 WebUI 知识库页面指定了知识库的 AstrBot 嵌入模型提供商时，本配置失效。（此项为 AstrBot 版本 < 3.5.13 用户设计，其他版本用户请忽略）"
    },
    "embedding_model_name": {
        "description": "[备用] Embedding 模型名称",
        "type": "string",
        "default": "text-embedding-v3",
        "hint": "当在 WebUI 知识库页面指定了知识库的 AstrBot 嵌入模型提供商时，本配置失效。（此项为 AstrBot 版本 < 3.5.13 用户设计，其他版本用户请忽略）"
    },
    "embedding_dimension": {
        "description": "[备用] Embedding 向量维度",
        "type": "int",
        "default": 1024,
        "hint": "当在 WebUI 知识库页面指定了知识库的 AstrBot 嵌入模型提供商时，本配置失效。（此项为 AstrBot 版本 < 3.5.13 用户设计，其他版本用户请忽略）"
    },
    "llm_rag_settings": {
        "description": "LLM RAG 增强设置",
        "hint": "控制知识库如何增强 LLM 回答的相关参数",
        "type": "object",
        "items": {
            "min_similarity_score": {
                "description": "相似度阈值",
                "hint": "只有相似度分数高于此阈值的文档才会被用于增强回答，范围 0.0-1.0，数值越高要求越严格",
                "type": "float",
                "default": 0.5
            },
            "insertion_method": {
                "description": "内容插入方式",
                "hint": "prepend_prompt: 添加到用户问题前；system_prompt: 添加到系统提示中",
                "type": "string",
                "default": "prepend_prompt",
                "options": [
                    "prepend_prompt",
                    "system_prompt"
                ]
            },
            "context_template": {
                "description": "上下文模板",
                "hint": "用于格式化检索到的知识库内容，{retrieved_contexts} 会被替换为实际检索结果",
                "type": "string",
                "default": "这是相关的知识库信息，请参考这些信息来回答用户的问题：\n{retrieved_contexts}"
            },
            "max_insert_length": {
                "description": "最大插入长度",
                "hint": "限制插入到 LLM 请求中的知识库内容最大字符数，防止上下文过长",
                "type": "int",
                "default": 200000
            }
        }
    }
}